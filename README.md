
<!-- README.md is generated from README.Rmd. Please edit that file -->

# jpcovid19

<!-- badges: start -->

<!-- badges: end -->

世界各地で深刻化している新型コロナウイルス感染症（COVID-19）に関するデータ処理および可視化を補助するRパッケージです。

## インストール

CRAN登録は行わないため、パッケージはGitHubを経由してインストールしてください。

``` r
install.packages("remotes")
remotes::install_github("tokyo/jpcovid19")
```

## デモ

``` r
library(jpcovid19)
```

### `read_yds_tky23()`

ヤフー・データソリューション <https://ds.yahoo.co.jp/>
が提供する「東京23区滞在人口推計値の日別遷移（全体・来訪者・住人）」データをRで扱いやすい形式として読み込みます。

具体的には元のエクセルデータに対して次の処理を行ったデータフレームを返却します。

  - 空白行の穴埋め
  - Rで読み込んだ際の列名の調整（日付として扱う）

<!-- end list -->

``` r
read_yds_tky23("東京23区推移0409.xlsx", sheet = 1)
#> # A tibble: 72 x 31                                                                                                        
#>    エリア 対象分類 `2020-02-01` `2020-02-02` `2020-02-03` `2020-02-04` `2020-02-05` `2020-02-06` `2020-02-07` `2020-02-08`
#>    <chr>  <chr>           <dbl>        <dbl>        <dbl>        <dbl>        <dbl>        <dbl>        <dbl>        <dbl>
#>  1 東京23区… 全体         10485000     10164000     11676000     11687000     11659000     11690000     11691000     10471000
#>  2 東京23区… 住人          8921000      8921000      8921000      8921000      8921000      8921000      8921000      8921000
#>  3 東京23区… 来訪者        1564000      1243000      2755000      2766000      2738000      2769000      2770000      1550000
#>  4 千代田区… 全体           454900       356900      1028900      1039900      1031900      1043900      1041900       453900
#>  5 千代田区… 住人            54900        54900        54900        54900        54900        54900        54900        54900
#>  6 千代田区… 来訪者         400000       302000       974000       985000       977000       989000       987000       399000
#>  7 中央区 全体           441000       367000       849000       857000       852000       861000       863000       440000
#>  8 中央区 住人           151000       151000       151000       151000       151000       151000       151000       151000
#>  9 中央区 来訪者         290000       216000       698000       706000       701000       710000       712000       289000
#> 10 港区   全体           615000       517000      1120000      1135000      1126000      1140000      1139000       614000
#> # … with 62 more rows, and 21 more variables: `2020-02-09` <dbl>, `2020-02-10` <dbl>, `2020-02-11` <dbl>, `2020-02-12` <dbl>,
#> #   `2020-02-13` <dbl>, `2020-02-14` <dbl>, `2020-02-15` <dbl>, `2020-02-16` <dbl>, `2020-02-17` <dbl>, `2020-02-18` <dbl>,
#> #   `2020-02-19` <dbl>, `2020-02-20` <dbl>, `2020-02-21` <dbl>, `2020-02-22` <dbl>, `2020-02-23` <dbl>, `2020-02-24` <dbl>,
# #   `2020-02-25` <dbl>, `2020-02-26` <dbl>, `2020-02-27` <dbl>, `2020-02-28` <dbl>, `2020-02-29` <dbl>
```

この関数では、対象ファイルの複数のシート（全期間）を一度に読み込み、縦長形式に変換するオプションを備えています。

``` r
read_yds_tky23("東京23区推移0409.xlsx", long = TRUE)
#> # A tibble: 14,688 x 4                                                                                                       #>    エリア       対象分類 date       visitors
#>    <chr>        <chr>    <date>        <dbl>
#>  1 東京23区全体 全体     2020-02-01 10485000
#>  2 東京23区全体 全体     2020-02-02 10164000
#>  3 東京23区全体 全体     2020-02-03 11676000
#>  4 東京23区全体 全体     2020-02-04 11687000
#>  5 東京23区全体 全体     2020-02-05 11659000
#>  6 東京23区全体 全体     2020-02-06 11690000
#>  7 東京23区全体 全体     2020-02-07 11691000
#>  8 東京23区全体 全体     2020-02-08 10471000
#>  9 東京23区全体 全体     2020-02-09 10149000
#> 10 東京23区全体 全体     2020-02-10 11523000
```

なおこのデータを用いて出典（ヤフー・データソリューション）を明示するよう、お願いします。
